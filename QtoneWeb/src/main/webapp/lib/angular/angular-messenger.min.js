!function(angular){var defaultId="default",messages={},messagesShown={};angular.module("angularMessenger",[]).service("Messenger",function(){var MessengerService={id:defaultId,show:function(){return messagesShown[this.id]=!1,this},count:function(){return messages[this.id].success.length+messages[this.id].info.length+messages[this.id].warning.length+messages[this.id].danger.length},success:function(msg){return messages[this.id].success.push(msg),this},info:function(msg){return messages[this.id].info.push(msg),this},warning:function(msg){return messages[this.id].warning.push(msg),this},danger:function(msg){return messages[this.id].danger.push(msg),this},error:function(msg){return this.danger(msg)},clear:function(){return messages[this.id]={success:[],info:[],warning:[],danger:[]},messagesShown[this.id]=!0,this}};return MessengerService.clear(),angular.extend(function(id){var messengerCopy=angular.copy(MessengerService);return messengerCopy.id=id,angular.isDefined(messages[id])||messengerCopy.clear(),messengerCopy},MessengerService)}).directive("messenger",function(Messenger){return{restrict:"E",templateUrl:"templates/angular-messenger.html",scope:{id:"@?"},controller:function($scope){angular.isDefined($scope.id)||($scope.id=defaultId),$scope.messenger=Messenger($scope.id),$scope.shown=!1,$scope.show=function(){$scope.shown||($scope.messages=angular.copy(messages[$scope.id]),$scope.messenger.clear())},$scope.show(),$scope.removeWatcher=$scope.$watch(function(){return messagesShown[$scope.id]},function(shown){$scope.shown=shown,$scope.show()},!0),$scope.$on("$destroy",function(){$scope.removeWatcher()})}}})}(angular);
angular.module("angularMessenger").run(["$templateCache",function($templateCache){$templateCache.put("templates/angular-messenger.html",'<div ng-repeat="msg in messages.success" class="alert alert-success" role="alert">\n    {{msg}}\n</div>\n\n<div ng-repeat="msg in messages.info" class="alert alert-info" role="alert">\n    {{msg}}\n</div>\n\n<div ng-repeat="msg in messages.warning" class="alert alert-warning" role="alert">\n    {{msg}}\n</div>\n\n<div ng-repeat="msg in messages.danger" class="alert alert-danger" role="alert">\n    {{msg}}\n</div>\n<span ng-init="shown = true"></span>')}]);